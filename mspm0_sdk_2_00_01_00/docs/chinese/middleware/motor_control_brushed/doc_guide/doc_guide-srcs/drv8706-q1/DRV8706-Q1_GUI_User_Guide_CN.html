<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DRV8706-Q1 EVM GUI User Guide &mdash; Brushed Motor Control User Guide 1.0.0.x documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="DRV8706-Q1 EVM GUI Hardware Guide" href="DRV8706-Q1_Hardware_User_Guide_CN.html" />
    <link rel="prev" title="库软件概述" href="../Brushed_Motor_Control_Software_Overview_CN.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Brushed Motor Control User Guide
          </a>
              <div class="version">
                1.0.0.x
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Brushed_Motor_Control_Quick_Start_Guide_CN.html">快速入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Brushed_Motor_Control_Software_Overview_CN.html">库软件概述</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">DRV8706-Q1 EVM GUI User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#useful-information">2. Useful Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hardware-connection">2.1 Hardware Connection.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-spi-communication">2.2 Enabling SPI Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-motor-driver-output">2.3 Enabling motor driver output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gui-protection">2.4 GUI Protection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">3. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#driver-mode">3. Driver Mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#half-bridge-mode">3.1 Half-Bridge Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#h-bridge-mode">3.2 H-Bridge Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#phase-enable-mode">3.3 Phase Enable Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solenoid-mode">3.4 Solenoid Mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pins-button-and-indicators">4. Pins Button and Indicators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fault-status-from-spi-operations">5. Fault Status from SPI Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spi-operations">6. SPI Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#write-register">6.1 Write Register</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-bitfield">6.2 Write Bitfield</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read-register">6.3 Read Register</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#current-sense-amplifier-output-voltage">7. Current Sense Amplifier Output Voltage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DRV8706-Q1_Hardware_User_Guide_CN.html">DRV8706-Q1 EVM GUI Hardware Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Brushed Motor Control User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>DRV8706-Q1 EVM GUI User Guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="drv8706-q1-evm-gui-user-guide">
<h1>DRV8706-Q1 EVM GUI User Guide<a class="headerlink" href="#drv8706-q1-evm-gui-user-guide" title="Permalink to this heading">¶</a></h1>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_screenshot.png" />
</figure>
<section id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>This graphical user interface (GUI) was developed to allow simple evaluation of a user’s motor with the DRV8706-Q1 evm being controlled by TI’s MSPM0 microcontroller. This guide will go over the key parts of the GUI to allow you to get up and running quickly. You can access the GUI described in this document <a class="reference external" href="https://dev.ti.com/gallery/view/TIMSPGC/MSPM0L-DRV8706S-Q1EVM-GUI">here</a>.</p>
</section>
<section id="useful-information">
<h2>2. Useful Information<a class="headerlink" href="#useful-information" title="Permalink to this heading">¶</a></h2>
<section id="hardware-connection">
<h3>2.1 Hardware Connection.<a class="headerlink" href="#hardware-connection" title="Permalink to this heading">¶</a></h3>
<p>View the <a class="reference external" href="./DRV8706-Q1_Hardware_User_Guide_CN.html">hardware user guide</a> to learn the steps required to get the hardware in the right state to run this GUI example.</p>
</section>
<section id="enabling-spi-communication">
<h3>2.2 Enabling SPI Communication<a class="headerlink" href="#enabling-spi-communication" title="Permalink to this heading">¶</a></h3>
<p>The motor driver must not be sleeping (nSLEEP pin is LOW) for SPI communication to work. If you try to perform a SPI write while the motor driver is sleeping the write will fail. Trying to perform a SPI read will likely result in garbage data. If you put the motor driver to sleep for more than 1ms then all the motor driver’s SPI registers will revert to their default value once its out of sleep mode.</p>
</section>
<section id="enabling-motor-driver-output">
<h3>2.3 Enabling motor driver output<a class="headerlink" href="#enabling-motor-driver-output" title="Permalink to this heading">¶</a></h3>
<p>User must set the DRVOFF pin to LOW as well as set the SPI bitfield IC_CTRL.EN_DRV to 1 to enable gate driver output. As discussed below certain changes in the GUI will automatically have DRVOFF set back to HIGH as a form of protection for the user.</p>
</section>
<section id="gui-protection">
<h3>2.4 GUI Protection<a class="headerlink" href="#gui-protection" title="Permalink to this heading">¶</a></h3>
<p>The driver mode you select must match how you physically hookup the motor to the DRV8706-Q1 EVM. Therefore, to protect the user any time a driver mode is changed the DRVOFF pin is set high ie the motor driver output is disabled. Even within a driver mode, changing things such as the direction or other settings will either set DRVOFF pin high , duty cycle to 0% or set outputs to HI-Z.</p>
</section>
</section>
<section id="getting-started">
<h2>3. Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h2>
<p>To run the demo the user must first follow the steps in the <a class="reference external" href="./DRV8706-Q1_Hardware_User_Guide_CN.html">hardware user guide</a>. Then the user must plug the USB cable into the LaunchPad and their computer. Finally they should launch the <a class="reference external" href="https://dev.ti.com/gallery/view/TIMSPGC/MSPM0L-DRV8706S-Q1EVM-GUI">GUI</a>.</p>
<p>The GUI will automatically program the LaunchPad with the necessary firmware. If everything is successful the bottom left corner of the GUI should say “Hardware connected”.</p>
</section>
<section id="driver-mode">
<h2>3. Driver Mode<a class="headerlink" href="#driver-mode" title="Permalink to this heading">¶</a></h2>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_driver_mode.png" />
</figure>
<p>The DRV8706-Q1 supports different control schemes and this drop down allows you to select between each one. Note by selecting a value in the drop down the motor driver will be automatically configured to use the selected control scheme via SPI operation. Switching between driver modes will result in DRVOFF pin being set high.</p>
<section id="half-bridge-mode">
<h3>3.1 Half-Bridge Mode<a class="headerlink" href="#half-bridge-mode" title="Permalink to this heading">¶</a></h3>
<p>Half-Bridge mode allows the user to control two half-bridges independently.</p>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_half_bridge_mode.png" />
</figure>
<ul class="simple">
<li><p>PWM Frequency – Changes the PWM frequency for the given half-bridge</p></li>
<li><p>Duty Cycle – Changes the Duty Cycle for the given half-bridge</p></li>
<li><p>Enable HI-Z – Will set the corresponding nHIZx pin to LOW which will set the associated motor driver outputs to LOW and high impedance.</p></li>
<li><p>Connected To - One of the motor pins needs to be connected to the motor driver’s output pin and the other motor pin needs to be connected to either PVDD or GND. This setting indicates what your connection looks like. Changing this value will automatically enable HI-Z. Leaving this value to UNK will force HI-Z to remain enabled.</p></li>
</ul>
<p><em>Important Note</em> To minimize the number of timers used the LP_MSPM0L1306 HAL module uses one timer for both PWM signals. Therefore, any time you change the PWM frequency for one channel the PWM frequency for the second channel is changed. So you will notice if you change the PWM frequency for Channel 1 the slider for Channel 2 will automatically match it and vice a versa.</p>
</section>
<section id="h-bridge-mode">
<h3>3.2 H-Bridge Mode<a class="headerlink" href="#h-bridge-mode" title="Permalink to this heading">¶</a></h3>
<p>Configure the DRV8706-Q1 to H-Bridge control mode. This is used to drive a single motor either forward or backward.</p>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_hbridge_mode.png" />
</figure>
<ul class="simple">
<li><p>PWM Frequency – Changes the PWM frequency for the given H-Bridge</p></li>
<li><p>Duty Cycle – Changes the Duty Cycle for the H-Bridge</p></li>
<li><p>Direction – Toggle to change the direction the motor spins. Changing directions will set duty cycle to 0% as a precaution.</p></li>
<li><p>Active Freewheel – Toggle to enable Active Freewheel. The determination if this is Low-Side Active Freewheel or High-Side Active Freewheel is determined by the value of the SPI register’s BRG_CTRL.BRG_FW bitfield. The power on reset value is set to use Low-Side freewheeling.</p></li>
</ul>
</section>
<section id="phase-enable-mode">
<h3>3.3 Phase Enable Mode<a class="headerlink" href="#phase-enable-mode" title="Permalink to this heading">¶</a></h3>
<p>Configure the DRV8706-Q1 to Phase Enable Control Mode</p>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_phase_enable_mode.png" />
</figure>
<ul class="simple">
<li><p>PWM Frequency – Changes the PWM frequency for the given H-Bridge</p></li>
<li><p>Duty Cycle – Changes the Duty Cycle for the H-Bridge</p></li>
<li><p>Direction – Toggle to change the direction the motor spins. Changing directions will set duty cycle to 0% as a precaution.</p></li>
</ul>
</section>
<section id="solenoid-mode">
<h3>3.4 Solenoid Mode<a class="headerlink" href="#solenoid-mode" title="Permalink to this heading">¶</a></h3>
<p>Configure the DRV8706-Q1 to use Solenoid Control Mode</p>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_solenoid_mode.png" />
</figure>
<ul class="simple">
<li><p>PWM Frequency – Changes the PWM frequency for the solenoid.</p></li>
<li><p>Duty Cycle – Changes the Duty Cycle for the solenoid.</p></li>
<li><p>Disable/Enable Switch – Toggle if you want to disable or enable the solenoid.</p></li>
</ul>
</section>
</section>
<section id="pins-button-and-indicators">
<h2>4. Pins Button and Indicators<a class="headerlink" href="#pins-button-and-indicators" title="Permalink to this heading">¶</a></h2>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_input_pins_switches.png" />
</figure>
<p>Controls the state of the MCU’s GPIO output pins connected to the motor driver’s nSLEEP and DRVOFF input pins.</p>
</section>
<section id="fault-status-from-spi-operations">
<h2>5. Fault Status from SPI Operations<a class="headerlink" href="#fault-status-from-spi-operations" title="Permalink to this heading">¶</a></h2>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_spi_fault_status.png" />
</figure>
<p>Whenever a SPI read or write operation is performed, the DRV8706-Q1 returns status flags back as part of its response. Grey means the associated motor driver fault hasn’t occurred. Red means the fault has occurred. These status leds are only updated during SPI read or write operations. Note the GUI does not clear any faults automatically so if a fault requires a SPI operation to be cleared the user will have to do so manually.</p>
</section>
<section id="spi-operations">
<h2>6. SPI Operations<a class="headerlink" href="#spi-operations" title="Permalink to this heading">¶</a></h2>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_spi_operations.png" />
</figure>
<p>These controls allow you to perform raw SPI operations by clicking on the red button. Note the GUI nor the library performs any protection when performing various SPI operations. So avoid making changes to registers or bitfields that the GUI/library is controlling internally such as the different drive modes.</p>
<section id="write-register">
<h3>6.1 Write Register<a class="headerlink" href="#write-register" title="Permalink to this heading">¶</a></h3>
<p>Performs a SPI write operation based on the register selected and the value specified.</p>
<ul class="simple">
<li><p>The dropdown selects the SPI register you want to write to.</p></li>
<li><p>The input field on the write represents the value you want to write and must include the 0x prefix. Hitting the button writes the value you inputted to the register you selected.</p></li>
</ul>
</section>
<section id="write-bitfield">
<h3>6.2 Write Bitfield<a class="headerlink" href="#write-bitfield" title="Permalink to this heading">¶</a></h3>
<p>Forms a SPI read modify write operation. This means that you can safely update a register’s bitfield without overwriting other bitfields in the register.</p>
<ul class="simple">
<li><p>The dropdown selects the SPI register you want to write to.</p></li>
<li><p>Bitfield position determines the starting bit. Your mask and value is automatically shifted by the position specified here.</p></li>
<li><p>Bitfield mask determines which bits you actually want to modify in hex. Value will be shifted automatically by the bitfield position entered.</p></li>
<li><p>The input field on the right represents the hex value you want to write. Value will be shifted automatically by the bitfield position entered.</p></li>
</ul>
<p>As an example lets say you want to change CSA_CTRL.CSA_BLK. You want to set it to 75% which means writing 101b. You will set the following</p>
<ul class="simple">
<li><p>Bitfield Position is 3 since CSA_BLK is from bits 5-3 ie starts at bit 3.</p></li>
<li><p>Bitfield Mask is 7 since the max value in the bitfield is 7. So you want to make sure you clear all the bits in this bitfield.</p></li>
<li><p>The input field is 0x5 which represents 101b.</p></li>
</ul>
</section>
<section id="read-register">
<h3>6.3 Read Register<a class="headerlink" href="#read-register" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The drop down allows you to select which register you want to read.</p></li>
<li><p>The input field on the right is read only and will reflect the value that is read.</p></li>
</ul>
<p>Anytime you perform a raw SPI write operation the dropdown and input field will automatically match the register you written and show the value that was read back after your write operation has been completed.</p>
</section>
</section>
<section id="current-sense-amplifier-output-voltage">
<h2>7. Current Sense Amplifier Output Voltage<a class="headerlink" href="#current-sense-amplifier-output-voltage" title="Permalink to this heading">¶</a></h2>
<figure class="align-default">
<img alt="" src="../../_images/drv8706q1_gui_csa_output_log.png" />
</figure>
<p>This graph shows the voltage the microcontroller has read from the current shunt amplifier. The plot refreshes with the latest output voltage every 16 ms.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Brushed_Motor_Control_Software_Overview_CN.html" class="btn btn-neutral float-left" title="库软件概述" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DRV8706-Q1_Hardware_User_Guide_CN.html" class="btn btn-neutral float-right" title="DRV8706-Q1 EVM GUI Hardware Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">1995-2023, Texas Instruments Incorporated. All rights reserved</a>, Texas Instruments Incorporated. All rights reserved. <br/>
      <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>