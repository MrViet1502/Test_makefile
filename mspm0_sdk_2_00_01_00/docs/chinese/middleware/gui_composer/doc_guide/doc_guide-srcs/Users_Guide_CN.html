<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GUI Composer 库用户指南 &mdash; GUI Composer Library Documentation 1.0.0.x documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="GUI Composer 快速入门指南" href="QuickStart_Guide_CN.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> GUI Composer Library Documentation
          </a>
              <div class="version">
                1.0.0.x
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="QuickStart_Guide_CN.html">GUI Composer 快速入门指南</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GUI Composer 库用户指南</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">1. 引言</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">2. 架构/总体概览</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">3. 文件夹结构</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">4. 了解示例</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#msp-gui">4.1 在 MSP 上接收来自 GUI 的数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">4.2 从 MSP 向 GUI 发送数据</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">4.2.1 支持的类型</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#messagepack">5. MessagePack 优化</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">5.1 配置解码器数据大小</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">5.2 配置支持的数据类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gui">5.3 GUI 修改</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id9">6. 基准测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">6.1 代码大小</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">6.2 消息大小</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id12">7. 其他信息</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GUI Composer Library Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>GUI Composer 库用户指南</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gui-composer">
<h1>GUI Composer 库用户指南<a class="headerlink" href="#gui-composer" title="Permalink to this heading">¶</a></h1>
<section id="id1">
<h2>1. 引言<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>GUI Composer 工程示例展示了 LaunchPad 与可在 PC 上运行的可自定义 GUI 应用程序之间基于 UART 的数据交换。这些 GUI 可以完全按照您的自定义来显示、处理数据并控制固件的执行。这些 GUI 也可以安装到 Code Composer Studio 中，以辅助基本调式功能，同时为非专业的手动测试人员提供简化的用户界面。</p>
<p>MSPM0 SDK 包括为配合使用 GUI Composer 而在目标 MSP 器件上运行的软件示例。此外，此 SDK 还包括预制的 GUI，它可以导入到 GUI Composer 并可配合提供的软件示例直接轻松使用。</p>
<p>有关初始设置和运行示例应用程序的更多入门信息，请查看快速入门指南。</p>
</section>
<section id="id2">
<h2>2. 架构/总体概览<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<p>下图显示了示例中不同层之间的关系。</p>
<figure class="align-default">
<img alt="" src="../_images/ug_layers.png" />
</figure>
<ul class="simple">
<li><p><strong>HAL</strong>：从 GUI 发送和接收数据的驱动程序。当前使用器件 UART。</p></li>
<li><p><strong>传输层协议</strong>：用于通过物理传输层传输数据的协议/编码方案。目前支持两种方案：<a class="reference external" href="https://www.json.org">JSON</a> 和 <a class="reference external" href="https://msgpack.org">MessagePack</a>。</p>
<ul>
<li><p><strong>JSON：</strong>使用 JSON 格式的字符串发送和接收数据</p></li>
<li><p><strong>MessagePack：</strong>使用 MessagePack 协议发送和接收数据</p></li>
</ul>
</li>
<li><p><strong>GUIComm API</strong>：提供的抽象层，独立于传输层。应用程序可以在不知晓底层协议的情况下调用这些 API。</p></li>
<li><p><strong>应用程序</strong>：用户应用程序。提供的示例展示了应用程序层如何独立于传输层及其下方的 HAL 层。</p></li>
</ul>
</section>
<section id="id3">
<h2>3. 文件夹结构<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<p>MSPM0 SDK 的根目录下提供以下文件夹：</p>
<ul class="simple">
<li><p><strong>docs/middleware/gui_composer</strong> - 包含与 MSP GUI Composer 包相关的所有文档</p></li>
<li><p><strong>examples/nortos//gui_composer</strong> - 包含所有代码示例以及应用程序和工程文件</p></li>
<li><p><strong>source/ti/gui_composer</strong> - 包含可导入到终端应用程序的泛型/可重用源代码</p></li>
</ul>
</section>
<section id="id4">
<h2>4. 了解示例<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h2>
<section id="msp-gui">
<h3>4.1 在 MSP 上接收来自 GUI 的数据<a class="headerlink" href="#msp-gui" title="Permalink to this heading">¶</a></h3>
<p>以 tGUI_RxCmd 类型的结构接收 GUI 命令。<em>main.c</em> 文件中定义了此结构。</p>
<figure class="align-default">
<img alt="" src="../_images/ug_guicommandstruct.png" />
</figure>
<p>每一条都包含 GUI 命令及其各自的回调函数。</p>
<p>在上例中，<em>bEnable</em> 是从 GUI 接收的命令，在 GUI 中，<em>bEnable</em> 是绑定到小工具的变量名。<em>GUICallback_boolEnable</em> 是各自的回调函数。应用程序回调文件 <em>callbacks_.c</em> 中定义了这些回调函数。<em>GUI_RXCommands[]</em> 结构很容易修改，可根据需要为 GUI 增加或删除命令。</p>
</section>
<section id="id5">
<h3>4.2 从 MSP 向 GUI 发送数据<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<p>可以在应用程序中使用 <em>GUIComm.h</em> 中列出的 API，以便轻松地将数据从 MSP 器件发送到 GUI，而不依赖于下面的传输层协议。GUIComm API 负责在选择的协议中对数据编码，并将数据发送到 GUI。</p>
<p>例如，应用程序中将调用以下函数：</p>
<p><code class="docutils literal notranslate"><span class="pre">GUIComm_sendBool(&quot;bEnable&quot;,</span> <span class="pre">STR_LEN_SEVEN,</span> <span class="pre">bEnableSwitch);</span></code></p>
<p>此 API 发送布尔变量 <em>bEnableSwitch</em> 中的值，以更新绑定到令牌 <em>bEnable</em> 的 GUI 小工具。<em>STR_LEN_SEVEN</em> 是发送的令牌的长度。</p>
<p>下图显示了一个按钮小工具的示例，其属性表明它绑定到令牌 <em>bEnable</em>。</p>
<figure class="align-default">
<img alt="" src="../_images/ug_binding.png" />
</figure>
<section id="id6">
<h4>4.2.1 支持的类型<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h4>
<p>GUIComm 函数支持以下数据类型：</p>
<ul class="simple">
<li><p>ints</p></li>
<li><p>uints</p></li>
<li><p>bools</p></li>
<li><p>floats/doubles</p>
<ul>
<li><p>mpack 原生或通过使用 QMath/IQMath 库支持 floats/doubles</p></li>
<li><p>json 仅可以通过使用 QMath/IQMath 库发送 floats/doubles</p></li>
</ul>
</li>
</ul>
<p>此外，支持 8、16、32 和 64 位的数据大小。</p>
</section>
</section>
</section>
<section id="messagepack">
<h2>5. MessagePack 优化<a class="headerlink" href="#messagepack" title="Permalink to this heading">¶</a></h2>
<p>mpack 库支持根据应用程序需求进行配置。在应用程序的 <code class="docutils literal notranslate"><span class="pre">mpack.h</span></code> 中可找到这些配置。</p>
<p>启用 MPACK_OPTIMIZE_FOR_SIZE 配置会在 mpack 解码器中开启优化，以通用性为代价减小 mpack 库的代码大小。启用优化时，用户可配置以下方面来减小代码大小：</p>
<ul class="simple">
<li><p>解码器数据大小（解码器可以接收的数据大小）</p></li>
<li><p>解码器数据类型（解码器支持使用的数据类型）</p></li>
</ul>
<p>通过减少允许的数据大小和数据类型数量，可以减小应用程序的大小。</p>
<p><strong>默认情况下，禁用</strong> <code class="docutils literal notranslate"><span class="pre">MPACK_OPTIMIZE_FOR_SIZE</span></code><strong>。</strong>禁用 <code class="docutils literal notranslate"><span class="pre">MPACK_OPTIMIZE_FOR_SIZE</span></code> 时，会启用所有数据大小（8、16、32 和 64 位）和所有支持的数据类型（uints、ints、bools 和 arrays）。</p>
<section id="id7">
<h3>5.1 配置解码器数据大小<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<p>用户可以配置 <code class="docutils literal notranslate"><span class="pre">MPACK_DECODE_SIZE</span></code> 宏组，以启用解码器可以接收的数据大小。 例如，如果仅启用 <code class="docutils literal notranslate"><span class="pre">MPACK_DECODE_SIZE_16_BITS</span></code>，则从 GUI 接收的所有传入数据必须是 16 位。它不会识别以 8 位、32 位或 64 位发送的数据。此外，一次可启用不止一个 <code class="docutils literal notranslate"><span class="pre">MPACK_DECODE_SIZE</span></code> 宏。通过减少解码器预期的数据大小数量，可以减小应用程序的代码大小。</p>
<figure class="align-default">
<img alt="" src="../_images/ug_mpackdecodesize.png" />
</figure>
<p>GUI Composer 默认会发送数据大小最小的数据，因此 <strong>GUI 必须修改为以特定数据大小发送所有数据</strong>。GUI 可以轻松修改，以完成此变更，更多详情参见 <strong>GUI 修改</strong>部分。</p>
<p>这些宏只影响 uints 和 ints，而不影响 maps、bools、strings 等其他数据类型。</p>
<p>启用 <code class="docutils literal notranslate"><span class="pre">MPACK_OPTIMIZE_FOR_SIZE</span></code> 时，默认启用 <code class="docutils literal notranslate"><span class="pre">MPACK_DECODE_SIZE_16_BITS</span></code>。</p>
</section>
<section id="id8">
<h3>5.2 配置支持的数据类型<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<p>用户可以配置宏组，以启用解码器会识别的数据类型。例如，如果仅启用 <code class="docutils literal notranslate"><span class="pre">MPACK_UINTS</span></code>，则解码器只能识别来自 GUI 的 uint 数据。如果收到 int 或 bool 数据，则会导致错误。</p>
<p>启用 <code class="docutils literal notranslate"><span class="pre">MPACK_OPTIMIZE_FOR_SIZE</span></code> 时，应用程序默认支持 uints、ints 和 bools 类型。</p>
<figure class="align-default">
<img alt="" src="../_images/ug_mpackdatatype.png" />
</figure>
</section>
<section id="gui">
<h3>5.3 GUI 修改<a class="headerlink" href="#gui" title="Permalink to this heading">¶</a></h3>
<p>如前所述，mpack 库可以优化，将 mpack 解码器配置为仅支持特定的数据大小。为此，必须在 GUI 中进行更改，使得从 GUI 发出的所有 uint 和 int 数据都以特定数据大小发送出去。</p>
<p>要进行此更改，必须将包含必要代码更改的新文件 <strong>main.js.</strong> 添加到 GUI。预制的 GUI <strong>MSPM0_SimpleGUI_mpack_optimized</strong> 中将提供此文件和必要代码。</p>
<figure class="align-default">
<img alt="" src="../_images/ug_mpack_mainjs.png" />
</figure>
<p>此修改将所有数据以 16 位 uint/ints 类型从 GUI 发送到器件。这样做可以减小器件上的代码大小，因为解码器只能接收 16 位数据。可在应用程序中完成此更改，方法是在应用程序的 mpack.h 中启用 <code class="docutils literal notranslate"><span class="pre">MPACK_DECODE_SIZE_16_BITS</span></code>，这会告知 MessagePack 解码器仅接收和解码 16 位数据。要发送其他数据大小，请在 main.js 文件中相应地修改 <code class="docutils literal notranslate"><span class="pre">encodeIntegerBitsize</span></code>。</p>
</section>
</section>
<section id="id9">
<h2>6. 基准测试<a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h2>
<section id="id10">
<h3>6.1 代码大小<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h3>
<p>下表显示了 <strong>gc_simple_json</strong> 示例和 <strong>gc_simple_mpack</strong> 示例中某些 MSPM0 器件上的代码大小。 此表的目的是比较传输层协议在总体代码大小上的差异，特别是 JSON、MessagePack（未优化）与针对 16 位解码优化的 MessagePack 之间的差异。 代码示例是使用 TI Clang 在优化级别 -02 上编译的。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>gc_simple_json</p></th>
<th class="head"><p>gc_simple_mpack（MPack 未优化）</p></th>
<th class="head"><p>gc_simple_mpack（MPack 已针对 16 位解码优化）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LP_MSPM0G3507</p></td>
<td><p>6.73kB</p></td>
<td><p>4.02kB</p></td>
<td><p>3.68kB</p></td>
</tr>
<tr class="row-odd"><td><p>LP_MSPM0L1306</p></td>
<td><p>6.73kB</p></td>
<td><p>3.88kB</p></td>
<td><p>3.54kB</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id11">
<h3>6.2 消息大小<a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h3>
<p>JSON 和 MessagePack 都对数据编码以便传输数据。下表比较了不同数据类型编码后的消息大小和每种协议下的数据大小。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>要编码的数据</p></th>
<th class="head"><p>JSON 编码后的消息大小</p></th>
<th class="head"><p>MPack 编码后的消息大小</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>4294967295 (uint32)</p></td>
<td><p>10 字节</p></td>
<td><p>5 字节</p></td>
</tr>
<tr class="row-odd"><td><p>65535 (uint16)</p></td>
<td><p>5 字节</p></td>
<td><p>3 字节</p></td>
</tr>
<tr class="row-even"><td><p>255 (uint8)</p></td>
<td><p>3 字节</p></td>
<td><p>2 字节</p></td>
</tr>
<tr class="row-odd"><td><p>-2147483648 (int32)</p></td>
<td><p>11 字节</p></td>
<td><p>5 字节</p></td>
</tr>
<tr class="row-even"><td><p>-32768 (int16)</p></td>
<td><p>6 字节</p></td>
<td><p>3 字节</p></td>
</tr>
<tr class="row-odd"><td><p>-128 (int8)</p></td>
<td><p>4 字节</p></td>
<td><p>2 字节</p></td>
</tr>
<tr class="row-even"><td><p>true (boolean)</p></td>
<td><p>4 字节</p></td>
<td><p>1 字节</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id12">
<h2>7. 其他信息<a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h2>
<p>有关 GUI Composer 的更多信息，请查看 <a class="reference external" href="https://dev.ti.com/gc/v2/help/GC_UserGuide_v2/index.html">GUI Composer 用户指南</a>。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="QuickStart_Guide_CN.html" class="btn btn-neutral float-left" title="GUI Composer 快速入门指南" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">1995-2023, Texas Instruments Incorporated. All rights reserved</a>, Texas Instruments Incorporated. All rights reserved. <br/>
      <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>